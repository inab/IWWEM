<html>
<head>
	<title>INB Web Workflow Manager</title>

	<link rel="shortcut icon" href="favicon.ico" type="image/vnd.microsoft.icon">
	<link rel="icon" href="favicon.ico" type="image/vnd.microsoft.icon">

	<link rel="stylesheet" type="text/css" href="style/IWWEM-buttons.css"></link>
	<link rel="stylesheet" type="text/css" href="style/IWWEM-styles.css"></link>

	<script type="text/javascript" src="js/ORFandDB-widgetCommon/browserdetect/BrowserDetect.js"></script>
	<script type="text/javascript" src="js/ORFandDB-widgetCommon/widgetCommon.js"></script>
	<script type="text/javascript" src="js/FCKeditor/fckeditor.js"></script>
	<script type="text/javascript" src="js/dynamicSVGhandling.js"></script>
	<script type="text/javascript" src="js/IWWEM-common.js"></script>
	<script type="text/javascript" src="js/workflowmanager.js"></script>
</head>
<body onload="InitIWWEM(WorkflowManagerCustomInit)" onunload="DisposeIWWEM(WorkflowManagerCustomDispose)">
<div align="center"><b>INB Web Workflow Enactor &amp; Manager</b></div>
<form id="formManager" method="post" enctype="multipart/form-data">
	<table style="width:100%">
		<tr><td class="data">
			<select name="workflow" id="workflow" class="scrolldata" size="20"></select>
			<!--<select name="workflow" id="workflow" style="width:230px;" size="20"></select>-->
		</td><td class="middle">
			<div align="center" id="svgdiv"></div>
		</td><td align="right" valign="top">
			<div class="scrolldata">
				<b>Title:</b>&nbsp;<span id="title"></span>
				<p><b>LSID:</b>&nbsp;<span id="lsid"></span></p>
				<p><b>Author:</b>&nbsp;<span id="author"></span></p>
				<b>Inputs</b>
				<div id="inputs">&nbsp;</div>
				<b>Outputs</b>
				<div id="outputs">&nbsp;</div>
				<b>Description</b>
				<div id="description" style="text-align:justify">&nbsp;</div>
				<b>Available enaction snapshots</b>
				<div id="snapshots" style="text-align:justify">&nbsp;</div>
			</div>
		</td></tr><tr><td class="buttons">
			<div align="center">
				<table><tr><td>
					<div class="button" onclick="genview.manview.reloadList()">Update <img src="style/reload.png"></div>
				</td><td>
					<div class="button" onclick="genview.newwfview.openNewWorkflowFrame()">Add new <img src="style/blueplus.png"></div>
				</td></tr></table>
			</div>
		</td><td class="buttons">
			<div align="center">
				<div class="button" onclick="genview.newenactview.openNewEnactionFrame()">Launch!<img src="style/greenball.png"></img></div>
			</div>
		</td><td class="buttons">
			<div align="right" style="vertical-align: bottom;">
				<span id="confirm" class='checkbox right red'>Confirm</span><br>
				<!--
				<label>Confirm<input type="checkbox" name="confirm" id="confirm"></input></label><br>
				-->
				<div class="button" onclick="genview.manview.deleteWorkflow()">Delete <img src="style/recycle.png"></img></div>
			</div>
		</td></tr>
	</table>
	<!-- Messages table -->
	<table>
		<tr><td>
			<p><u>Submitted enaction jobs</u></p>
			<ol id="submittedList"></ol>
		</td><td>
			<p><u>Last operation message</u></p>
			<div id="messageDiv"></div>
		</td></tr>
	</table>
</form>
<div class="hidden" id="outerAbsDiv"></div>
<div class="hidden" id="newWorkflow">
	<div class="secondary">
		<div align="center">Please introduce your workflow and the local workflows it depends on</div>
		<form id="formNewWF" action="cgi-bin/workflowmanager" method="post" enctype="multipart/form-data">
			<div align="center">
				<table><tr><td>
					<div class="borderedOption"><span id="newWFStyleText" class="radio left">As text</span>&nbsp;<span id="newWFStyleFile" class="radio left">As file</span></div>
				</td></tr><tr><td>
					<div id="newWFContainer"></div>
				</td></tr><tr><td>
					<div align="center" id="newWFUploading"><i><blink>Uploading and checking new workflow...</blink> </i><img src="style/ajaxLoader.gif"></img>
						<iframe src="about:blank" frameborder="0" id="uploadIFRAME" name="uploadIFRAME" style="width:0;height:0;visibility:hidden;"></iframe>
					</div>
					<div id="newSubWFContainer"></div>
				</td></tr></table>
			</div>
		</form>
		<div class="button back" onclick="genview.newwfview.closeNewWorkflowFrame()">
			<table style="width:100%; height:100%;margin:0px;padding:0px"><tr valign="middle"><td align="center">
				<img src="style/leftarrow.png"></img> Back
			</td></tr></table>
		</div>
		<div class="button forward" onclick="genview.newwfview.upload()">
			<table style="width:100%; height:100%;margin:0px;padding:0px"><tr valign="middle"><td align="center">
				Upload <img src="style/upload.png"></img>
			</td></tr></table>
		</div>
	</div>
</div>
<div class="hidden" id="newEnaction">
	<div class="secondary">
		<div align="center">Please introduce your inputs for workflow</div>
		<form id="formEnactor" action="cgi-bin/enactionlauncher" method="post" target="_blank" enctype="multipart/form-data">
			<input id="workflowHiddenInput" type="hidden" name="workflow"></input>
			<table width="100%">
				<tr><td>
					<div align="center" id="enactsvg"></div>
				</td><td width="100%">
					<div class="scrolldatalarge">
						<div style="margin: 5px 5px 5px 5px">
							<span class="borderedOption">
							<span id="noneExampleSpan" class="radio right">Use inputs</span>
							<span id="saveAsExampleSpan" class="checkbox right green">Save as example</span>
							</span>
							<span class="borderedOption">
							<span id="useExampleSpan" class="radio right">Use example</span>
							</span>
							<div id="saveExampleDiv"></div>
						</div>
						<div id="newInputs"></div>
					</div>
				</td></tr>
			</table>
		</form>
		<div id="newEnactUploading">
			<iframe src="about:blank" frameborder="0" id="enactIFRAME" name="enactIFRAME" style="width:0;height:0;visibility:hidden;"></iframe>
		</div>
		<div class="button back" onclick="genview.newenactview.closeNewEnactionFrame()">
			<table style="width:100%; height:100%;margin:0px;padding:0px"><tr valign="middle"><td align="center">
				<img src="style/leftarrow.png"></img> Back
			</td></tr></table>
		</div>
		<div class="button forward" onclick="genview.newenactview.enact()">
			<table style="width:100%; height:100%;margin:0px;padding:0px"><tr valign="middle"><td align="center">
				Start! <img src="style/run.png"></img>
			</td></tr></table>
		</div>
	</div>
</div>
<div class="hidden" id="reloadWorkflows">
	<table style="width:100%; height:100%"><tr valign="middle"><td align="center">
		<img src="style/big-ajax-loader.gif"></img>
	</td></tr></table>
	<!--
	<img style="position:relative; top: 45%;left: 45%" src="style/big-ajax-loader.gif"></img>
	-->
</div>
<div class="hidden" id="submitEnaction">
	<table style="width:100%; height:100%"><tr valign="middle"><td align="center">
		<img src="style/big-ajax-submit.gif"></img>
	</td></tr></table>
</div>
<iframe class="hidden" frameborder="0" src="about:blank" id="shimmer">
</iframe>
</body>
</html>
